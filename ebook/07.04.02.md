# 7.4.2 发现代理

广域网中的设备跨越多个管理域的网络配置，网络管理员需要引进一个DP端点进入系统。 DP执行以下任务：
1. 监听设备hello消息和响应这些定义在7.4.3节。
2. 响应代表的注册客户端设备上的查询的探测。

DP可能像设备一样驻留在同一个管理域。客户端和设备驻留在不同的域无法通过组播相连接时，为了支持这种网络情景，将DP放在一个公开的可用的网络以便设备和客户端的端点可以访问它。为了让设备的Hello消息准确直达发送到它的home DP宣布它的存在， 应让设备能找到它的“home DP”的网络地址。在本说明书中，home DP网络地址可以通过两种方式获得：
1. 直接地址配置。
2. DP发现使用DNS服务记录（SRV）查询。

一旦设备得到网络连接或当home DP的网络地址改变时，设备就会试着使用这些方法去连接到home DP。应能操作启用或禁用设备远程发现注册功能。支持远程发现的设备应实现远程Hello的启用和禁用操作，定义详见8.3.21节。

在7.4.3节中定义了，当一个设备未配置home DP地址或设备禁用了远程Hello操作时将无法发送远程Hello消息。

1. 直接DP地址配置 
该规范引入了一种通过网络接口配置home DP地址的设备管理命令，请参阅8.3.22和8.3.23节。

2. DNS服务记录查询
如果设备要启用远程发现，但是缺乏远程DP地址配置，应当试着进行DNS SRV查询该home DP。应使用以下由[RFC2782]定义的记录名称和协议：

_onvifdiscover._tcp

为了避免设备的DNS SRV查询，在启用远程发现前应通过直接地址配置一个DP地址。
为了让设备通过DP查询成功的发现其他设备，管理员应该输入DP地址，端口和优先级到使用SRV的DNS配置中。需存在一个或多个注册服务器。确切的数目取决于系统的负荷，并且在本说明书的范围之外。

[上一章](07.04.01.md)|[继续阅读](07.04.03.md)
